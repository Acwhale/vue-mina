{"version":3,"sources":["webpack:///./src/components/mask/mask.vue?05cf","webpack:///./src/components/mask/mask.vue","webpack:///src/components/mask/mask.vue","webpack:///src/pages/bookDetail/bookDetail.vue","webpack:///./src/pages/bookDetail/bookDetail.vue?422d","webpack:///./src/pages/bookDetail/bookDetail.vue","webpack:///./src/model/like.js"],"names":["mask_mask","render","_h","this","$createElement","_self","_c","staticClass","staticRenderFns","components_mask_mask","__webpack_require__","normalizeComponent","name","ssrContext","likeModel","model_like","bookModel","book","bookDetail","components","CmpTag","tag","CmpLike","like","CmpMask","data","content","comments","likeStatus","likeCount","posting","methods","handlePost","text","id","$route","params","_addComment","handlePostInput","length","Object","es","_this","addComment","then","res","status","unshift","nums","handleCancel","postFake","getBookDeatail","_this2","statusText","getBookComments","_this3","getLikeStatus","_this4","fav_nums","like_status","handleStatus","console","log","computed","bookSummary","summary","reg","RegExp","replace","mounted","bookDetail_bookDetail","_vm","attrs","src","image","alt","_v","_s","title","author","_e","directives","rawName","value","expression","_l","item","index","key","slot","domProps","innerHTML","_m","publisher","pubdate","pages","price","binding","on","click","count","type","placeholder","input","$event","target","composing","bookDetail_Component","bookDetail_normalizeComponent","__webpack_exports__","LikeModel","artID","category","url","art_id","axios","post"],"mappings":"6KAGeA,GADEC,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAAkD,OAA/DD,KAAuCE,MAAAC,IAAAJ,GAAwB,OAAiBK,YAAA,eAEzFC,oBCCjB,IAuBeC,EAvBUC,EAAQ,OAcjCC,ECVAC,KAAA,WDYEZ,GATF,EAVA,SAAAa,GACEH,EAAQ,SAaV,kBAEA,MAUgC,4CEiDhCI,EAAA,IAAAC,EAAA,EAEAC,EAAA,IAAAC,EAAA,EAEAC,GACAN,KAAA,aACAO,YACAC,OAAAC,EAAA,EACAC,QAAAC,EAAA,EACAC,QAAAf,GAEAgB,KAPA,WAQA,OACAC,QAAA,GACAC,YACAV,KAAA,KACAW,YAAA,EACAC,UAAA,EACAC,SAAA,IAGAC,SAIAC,WAJA,SAIAC,GACA,IAAAC,EAAA/B,KAAAgC,OAAAC,OAAAF,GACA/B,KAAAkC,YAAAH,EAAAD,IAEAK,gBARA,WASA,IAAAZ,EAAAvB,KAAAuB,QACAQ,EAAA/B,KAAAgC,OAAAC,OAAAF,GACA,GAAAR,EAAAa,OAIAb,EAAAa,OAAA,GACQC,OAAAC,EAAA,EAAAD,CAAR,UAGArC,KAAAkC,YAAAH,EAAAR,GAPQc,OAAAC,EAAA,EAAAD,CAAR,UAYAH,YAxBA,SAwBAH,EAAAD,GAAA,IAAAS,EAAAvC,KACAa,EAAA2B,WAAAT,EAAAD,GAAAW,KAAA,SAAAC,GACA,KAAAA,EAAAC,SACAJ,EAAAf,kBAAAoB,SACArB,QAAAO,EACAe,KAAA,IAEUR,OAAAC,EAAA,EAAAD,CAAV,MACAE,EAAAZ,SAAA,MAKAmB,aArCA,WAsCA9C,KAAA2B,SAAA,GAKAoB,SA3CA,WA4CA/C,KAAA2B,SAAA,GAKAqB,eAjDA,SAiDAjB,GAAA,IAAAkB,EAAAjD,KACAa,EAAAmC,eAAAjB,GAAAU,KAAA,SAAAC,GACA,KAAAA,EAAAC,QAAA,MAAAD,EAAAQ,aACAR,IAAApB,KACA2B,EAAAnC,KAAA4B,MAOAS,gBA5DA,SA4DApB,GAAA,IAAAqB,EAAApD,KACAa,EAAAsC,gBAAApB,GAAAU,KAAA,SAAAC,GACA,KAAAA,EAAAC,QAAA,MAAAD,EAAAQ,aACAR,IAAApB,KACA8B,EAAA5B,SAAAkB,MAQAW,cAxEA,SAwEAtB,GAAA,IAAAuB,EAAAtD,KACAa,EAAAwC,cAAAtB,GAAAU,KAAA,SAAAC,GACA,KAAAA,EAAAC,QAAA,MAAAD,EAAAQ,aACAR,IAAApB,KACAgC,EAAA5B,UAAAgB,EAAAa,SACAD,EAAA7B,WAAA,GAAAiB,EAAAc,gBAOAC,aApFA,SAoFArC,GACAT,EAAAS,OAAApB,KAAAc,KAAAiB,GAAA,KAAAU,KAAA,SAAAC,GACAgB,QAAAC,IAAAjB,OAIAkB,UACAC,YAAA,WACA,IAAA7D,KAAAc,KAAAgD,QACA,SAEA,IAAAC,EAAA,IAAAC,OAAA,aAKA,OAJAhE,KAAAc,KAAAgD,QAAAG,QACAF,EACA,2CAKAG,QAxHA,WAyHA,IAAAnC,EAAA/B,KAAAgC,OAAAC,OAAAF,GACA/B,KAAAgD,eAAAjB,GACA/B,KAAAmD,gBAAApB,GACA/B,KAAAqD,cAAAtB,KCxMeoC,GADErE,OAFP,WAAgB,IAAAsE,EAAApE,KAAaD,EAAAqE,EAAAnE,eAA0BE,EAAAiE,EAAAlE,MAAAC,IAAAJ,EAAwB,OAAAI,EAAA,OAAiBC,YAAA,0BAAoCgE,EAAA,KAAAjE,EAAA,OAAuBC,YAAA,SAAmBD,EAAA,OAAYkE,OAAOC,IAAAF,EAAAtD,KAAAyD,MAAAC,IAAA,MAA+BJ,EAAAK,GAAA,KAAAtE,EAAA,QAAyBC,YAAA,UAAoBgE,EAAAK,GAAAL,EAAAM,GAAAN,EAAAtD,KAAA6D,UAAAP,EAAAK,GAAA,KAAAtE,EAAA,QAA0DC,YAAA,WAAqBgE,EAAAK,GAAAL,EAAAM,GAAAN,EAAAtD,KAAA8D,OAAA,SAAAR,EAAAS,KAAAT,EAAAK,GAAA,KAAAtE,EAAA,OAAwEC,YAAA,kBAA4BD,EAAA,QAAaC,YAAA,aAAuBgE,EAAAK,GAAA,QAAAL,EAAAK,GAAA,KAAAtE,EAAA,QAAwC2E,aAAarE,KAAA,OAAAsE,QAAA,SAAAC,MAAA,GAAAZ,EAAA5C,kBAAAyD,WAAA,+BAA4G7E,YAAA,WAAuBgE,EAAAK,GAAA,UAAAL,EAAAK,GAAA,KAAAtE,EAAA,OAAyCC,YAAA,uBAAkCgE,EAAAc,GAAAd,EAAA5C,SAAA,kBAAA2D,EAAAC,GAAqD,OAAAjF,EAAA,OAAiBkF,IAAAD,IAAUjF,EAAA,WAAgBC,YAAA,KAAAiE,OAAwBvC,KAAAqD,EAAA5D,WAAqBpB,EAAA,QAAaC,YAAA,MAAAiE,OAAyBiB,KAAA,SAAeA,KAAA,UAAclB,EAAAK,GAAAL,EAAAM,GAAA,IAAAS,EAAAtC,YAAA,QAAyCuB,EAAAK,GAAA,KAAAL,EAAA,KAAAjE,EAAA,OAAsCC,YAAA,kBAA4BD,EAAA,QAAaC,YAAA,aAAuBgE,EAAAK,GAAA,UAAAL,EAAAK,GAAA,KAAAtE,EAAA,KAAuCC,YAAA,UAAAmF,UAAgCC,UAAApB,EAAAM,GAAAN,EAAAP,kBAAqCO,EAAAS,KAAAT,EAAAK,GAAA,KAAAtE,EAAA,OAAmCC,YAAA,kBAA4BD,EAAA,QAAaC,YAAA,aAAuBgE,EAAAK,GAAA,UAAAL,EAAAK,GAAA,KAAAtE,EAAA,OAAyCC,YAAA,oBAA8BgE,EAAAqB,GAAA,GAAArB,EAAAK,GAAA,KAAAL,EAAA,KAAAjE,EAAA,OAA6CC,YAAA,aAAuBD,EAAA,UAAaiE,EAAAK,GAAAL,EAAAM,GAAAN,EAAAtD,KAAA4E,cAAAtB,EAAAK,GAAA,KAAAtE,EAAA,UAA8DiE,EAAAK,GAAAL,EAAAM,GAAAN,EAAAtD,KAAA6E,YAAAvB,EAAAK,GAAA,KAAAtE,EAAA,UAA4DiE,EAAAK,GAAAL,EAAAM,GAAAN,EAAAtD,KAAA8E,UAAAxB,EAAAK,GAAA,KAAAtE,EAAA,UAA0DiE,EAAAK,GAAAL,EAAAM,GAAAN,EAAAtD,KAAA+E,UAAAzB,EAAAK,GAAA,KAAAtE,EAAA,UAA0DiE,EAAAK,GAAAL,EAAAM,GAAAN,EAAAtD,KAAAgF,cAAA1B,EAAAS,SAAAT,EAAAK,GAAA,KAAAL,EAAAzC,QAAiYyC,EAAAS,KAAjY1E,EAAA,OAAyFC,YAAA,mBAA6BD,EAAA,OAAYC,YAAA,YAAA2F,IAA4BC,MAAA5B,EAAArB,YAAsB5C,EAAA,QAAAiE,EAAAK,GAAA,YAAAL,EAAAK,GAAA,KAAAtE,EAAA,OAAsDC,YAAA,mBAA6BD,EAAA,YAAiBC,YAAA,UAAAiE,OAA6B4B,MAAA7B,EAAA1C,UAAAN,KAAAgD,EAAA3C,YAA4CsE,IAAKpD,OAAAyB,EAAAX,iBAA2B,KAAAW,EAAAK,GAAA,KAAAL,EAAA,QAAAjE,EAAA,OAAqDC,YAAA,sBAAgCD,EAAA,OAAYC,YAAA,gBAA0B,GAAAgE,EAAA5C,kBAAArB,EAAA,QAAAiE,EAAAK,GAAA,cAAAtE,EAAA,QAAAiE,EAAAK,GAAA,UAAAL,EAAAK,GAAA,KAAAtE,EAAA,QAA0HC,YAAA,SAAA2F,IAAyBC,MAAA5B,EAAAtB,gBAA0BsB,EAAAK,GAAA,UAAAL,EAAAK,GAAA,KAAAtE,EAAA,OAAyCC,YAAA,sBAAiCgE,EAAAc,GAAAd,EAAA5C,SAAA,kBAAA2D,EAAAC,GAAqD,OAAAjF,EAAA,OAAiBkF,IAAAD,IAAUjF,EAAA,WAAgBC,YAAA,SAAAiE,OAA4BvC,KAAAqD,EAAA5D,SAAoBwE,IAAK7E,IAAAkD,EAAAvC,cAAsB1B,EAAA,QAAaC,YAAA,MAAAiE,OAAyBiB,KAAA,SAAeA,KAAA,UAAclB,EAAAK,GAAAL,EAAAM,GAAA,IAAAS,EAAAtC,YAAA,MAAyCuB,EAAAK,GAAA,KAAAtE,EAAA,SAA2B2E,aAAarE,KAAA,QAAAsE,QAAA,UAAAC,MAAAZ,EAAA,QAAAa,WAAA,YAAwE7E,YAAA,OAAAiE,OAA4B6B,KAAA,OAAAC,YAAA,YAAuCZ,UAAWP,MAAAZ,EAAA,SAAsB2B,IAAKC,MAAA5B,EAAAjC,gBAAAiE,MAAA,SAAAC,GAAqDA,EAAAC,OAAAC,YAAsCnC,EAAA7C,QAAA8E,EAAAC,OAAAtB,aAAkCZ,EAAAS,KAAAT,EAAAK,GAAA,KAAAL,EAAA,QAAAjE,EAAA,YAAAiE,EAAAS,MAAA,IAEr+FxE,iBADb,WAAiB,IAAA+D,EAAApE,KAAaD,EAAAqE,EAAAnE,eAA0BE,EAAAiE,EAAAlE,MAAAC,IAAAJ,EAAwB,OAAAI,EAAA,OAAiBC,YAAA,aAAuBD,EAAA,OAAYC,YAAA,gBAA0BgE,EAAAK,GAAA,SAAAL,EAAAK,GAAA,KAAAtE,EAAA,OAAwCC,YAAA,gBAA0BgE,EAAAK,GAAA,SAAAL,EAAAK,GAAA,KAAAtE,EAAA,OAAwCC,YAAA,gBAA0BgE,EAAAK,GAAA,QAAAL,EAAAK,GAAA,KAAAtE,EAAA,OAAuCC,YAAA,gBAA0BgE,EAAAK,GAAA,QAAAL,EAAAK,GAAA,KAAAtE,EAAA,OAAuCC,YAAA,gBAA0BgE,EAAAK,GAAA,aCEvb,IAcI+B,EAdqBjG,EAAQ,OAcjBkG,CACd1F,EACAoD,GAT6B,EAV/B,SAAoBzD,GAClBH,EAAQ,SAaS,kBAEU,MAUdmG,EAAA,QAAAF,EAAiB,gHCxB1BG,+EACGvF,EAAKwF,EAAMC,GACZ,IAAIC,EAAM1F,EAAO,OAAQ,cACrBa,GACA8E,OAASH,EACTV,KAAOW,GAEX,OAAOG,IAAMC,KAAKH,EAAI7E,YAGf0E","file":"static/js/4.229c6ef54da773a7a30c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-867313a6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/mask/mask.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-867313a6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./mask.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./mask.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./mask.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-867313a6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./mask.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-867313a6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/mask/mask.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div class=\"container\">\r\n\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name:\"CmpMask\"\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n    .container{\r\n        background-color #000000\r\n        position fixed\r\n        top:0\r\n        opacity 0.6\r\n        width 100%\r\n        height 92%\r\n        z-index 99\r\n    }\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/mask/mask.vue","<template>\r\n    <div class=\"container ext-content\">\r\n        <div class=\"head\" v-if=\"book\">\r\n            <img :src=\"book.image\" alt=\"\">\r\n            <span class=\"title\">{{book.title}}</span>\r\n            <span class=\"author\">{{book.author[0]}}</span>\r\n        </div>\r\n        <div class=\"sub-container\">\r\n            <span class=\"headline\">短评</span>\r\n            <span class=\"shadow\" v-show=\"comments.comments == false\">暂无短评</span>\r\n            <div class=\"comments-container \">\r\n                <div v-for=\"(item,index) of comments.comments\" :key=\"index\">\r\n                    <cmp-tag class=\"ex\" :text=\"item.content\"> \r\n                    <span class=\"num\" slot=\"after\">{{\"+\" +item.nums}}</span>\r\n                    </cmp-tag>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"sub-container\" v-if=\"book\">\r\n            <span class=\"headline\">内容简介</span>\r\n            <p class=\"content\"  v-html=\"bookSummary\"></p>\r\n        </div>\r\n        <div class=\"sub-container\">\r\n            <span class=\"headline\">书本信息</span>\r\n            <div class=\"detail-contaner\">\r\n            <div class=\"vertical\">\r\n                <div class=\"description\">出版社</div>\r\n                <div class=\"description\">出版年</div>\r\n                <div class=\"description\">页数</div>\r\n                <div class=\"description\">定价</div>\r\n                <div class=\"description\">装帧</div>\r\n            </div>\r\n            <div class=\"vertical\" v-if=\"book\">\r\n                <div class=\"\">{{book.publisher}}</div>\r\n                <div class=\"\">{{book.pubdate}}</div>\r\n                <div class=\"\">{{book.pages}}</div>\r\n                <div class=\"\">{{book.price}}</div>\r\n                <div class=\"\">{{book.binding}}</div>\r\n            </div>\r\n        </div>\r\n        </div>\r\n\r\n        <div class=\"post-container\" v-if=\"!posting\">\r\n            <div @click=\"postFake\" class=\"post-fake\">\r\n                <span>输入短评</span>\r\n            </div>\r\n            <div class=\"like-container\">\r\n                <cmp-like :count=\"likeCount\" :like=\"likeStatus\" class=\"cmplike\" @status=handleStatus></cmp-like>\r\n            </div>\r\n        </div>\r\n        <div class=\"posting-container\" v-if=\"posting\">\r\n            <div class=\"post-header\">\r\n                <span v-if =\" !(comments.comments == false)\">仅可点击标签+1</span>\r\n                <span v-else >暂无短评</span>\r\n                <span class=\"cancel\" @click=\"handleCancel\">取消</span>\r\n            </div>\r\n            <div class=\"comments-container\">\r\n                <div v-for=\"(item,index) of comments.comments\" :key=\"index\">\r\n                    <cmp-tag class=\"ex-tag\" :text=\"item.content\"  @tag='handlePost'> \r\n                    <span class=\"num\" slot=\"after\">{{\"+\" +item.nums}}</span>\r\n                    </cmp-tag>\r\n                </div>\r\n            </div>\r\n            <input type=\"text\" class=\"post\"  placeholder=\"短评最多12个字\" v-model=\"content\" @click=\"handlePostInput\">\r\n        </div>\r\n        <cmp-mask v-if=\"posting\"></cmp-mask>\r\n    </div>\r\n</template>\r\n<script>\r\nimport CmpTag from \"@/components/tag/tag\"\r\nimport CmpLike from \"@/components/like/like\"\r\nimport CmpMask from \"@/components/mask/mask\"\r\nimport { Toast } from 'vant'\r\n\r\nimport LikeModel from\"@/model/like.js\";\r\nconst likeModel = new LikeModel()\r\nimport BookModel from \"@/model/book.js\"\r\nconst bookModel = new BookModel()\r\n\r\nexport default {\r\n  name: \"BookDetail\",\r\n  components: {\r\n    CmpTag,\r\n    CmpLike,\r\n    CmpMask,\r\n  },\r\n  data() {\r\n    return {\r\n      content:'',  \r\n      comments: [],\r\n      book: null,\r\n      likeStatus: false,\r\n      likeCount: 0,\r\n      posting: false,\r\n    }\r\n  },\r\n  methods: {\r\n     /**\r\n     * 提交短评\r\n     */\r\n    handlePost(text){\r\n        let id = this.$route.params.id\r\n        this._addComment(id,text)\r\n    },\r\n    handlePostInput(){\r\n        let content = this.content\r\n        let id = this.$route.params.id\r\n        if(content.length == 0){\r\n            Toast('请输入内容')\r\n            return\r\n        }\r\n        if(content.length > 12){\r\n            Toast('短评12个字')\r\n            return\r\n        }\r\n        this._addComment(id,content)\r\n\r\n\r\n\r\n    },\r\n    _addComment(id,text){\r\n         bookModel.addComment(id,text).then((res)=>{\r\n            if(res.status == 201 ){\r\n                this.comments.comments.unshift({\r\n                    content:text,\r\n                    nums:1\r\n                })\r\n                Toast('+1')\r\n                this.posting = false\r\n            }\r\n        })\r\n    },\r\n    //取消\r\n    handleCancel(){\r\n        this.posting = false\r\n    },\r\n    /**\r\n     * 提交短评\r\n     */\r\n    postFake(){\r\n        this.posting = true\r\n    },\r\n    /**\r\n     * 获取书籍详细信息\r\n     */\r\n    getBookDeatail(id) {\r\n      bookModel.getBookDeatail(id).then(res => {\r\n        if (res.status == 200 && res.statusText == \"OK\") {\r\n          res = res.data;\r\n          this.book = res;\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 获取书籍的短评\r\n     */\r\n    getBookComments(id) {\r\n      bookModel.getBookComments(id).then(res => {\r\n        if (res.status == 200 && res.statusText == \"OK\") {\r\n          res = res.data;\r\n          this.comments = res;\r\n\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 获取书籍点赞信息\r\n     */\r\n    getLikeStatus(id){\r\n        bookModel.getLikeStatus(id).then((res)=>{\r\n            if(res.status == 200 && res.statusText == 'OK'){\r\n                res = res.data\r\n                this.likeCount = res.fav_nums\r\n                this.likeStatus =  res.like_status == 0 ? false :true\r\n            }\r\n        })\r\n    },\r\n    /**\r\n     * 监听like事件\r\n     */\r\n    handleStatus(like){\r\n        likeModel.like(like,this.book.id,400).then((res)=>{\r\n                console.log(res)\r\n            })\r\n    }\r\n  },\r\n  computed: {\r\n    bookSummary: function() {\r\n      if (!this.book.summary) {\r\n        return \"\"\r\n      }\r\n      let reg = new RegExp(\"\\\\\\\\n\", \"g\")\r\n      let text = this.book.summary.replace(\r\n        reg,\r\n        \"<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"\r\n      )\r\n      return text\r\n    }\r\n  },\r\n  mounted() {\r\n    let id = this.$route.params.id\r\n    this.getBookDeatail(id)\r\n    this.getBookComments(id)\r\n    this.getLikeStatus(id)\r\n  }\r\n};\r\n</script>\r\n<style lang='stylus' scoped>\r\n    .container {\r\n        background-color: #f5f5f5;\r\n        width: 100%;\r\n    }\r\n\r\n    .head {\r\n        background-color: #ffffff;\r\n        padding-top: 0.4rem;\r\n        padding-bottom: 0.4rem;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n\r\n    .head img {\r\n        width: 2rem;\r\n        height: 3rem;\r\n        box-shadow: 0.1rem 0.1rem 0.1rem #e3e3e3;\r\n    }\r\n\r\n    .title {\r\n        color: #2f2f2f;\r\n        margin-top: 0.2rem;\r\n        font-size: 0.4rem;\r\n        font-weight: 600;\r\n    }\r\n\r\n    .author {\r\n        margin-top: 0.1rem;\r\n        font-size: 0.3rem;\r\n        color: #999;\r\n    }\r\n\r\n    .sub-container {\r\n        width: 6.9rem;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        margin-top: 0.3rem;\r\n        background-color: #ffffff;\r\n        padding: .3rem;\r\n    }\r\n\r\n    .headline {\r\n        font-size: 0.3rem;\r\n        font-font-weight: 600;\r\n        color: #2f2f2f;\r\n        margin-bottom: 0.2rem;\r\n    }\r\n\r\n    .comments-container {\r\n        display inline-flex\r\n        flex-direction row\r\n        align-items flex-start\r\n        width 100%\r\n        flex-wrap: wrap\r\n        padding 0 0.3rem\r\n    }\r\n\r\n    .num {\r\n        margin-left 0.1rem\r\n        font-size 0.22rem\r\n        color #aaa\r\n    }\r\n\r\n    .ex-tag {\r\n        background-color #fffbdd !important\r\n    }\r\n    .ex{\r\n        background-color #eefbff !important\r\n    }\r\n\r\n    .ext-content {\r\n        margin-bottom:1.5rem\r\n    }\r\n\r\n    .content {\r\n        line-height 0.4rem\r\n        letter-spacing 0.01rem\r\n        font-size 0.28rem\r\n        text-indent 0.6rem\r\n        color #000\r\n        font-weight 500\r\n    }\r\n\r\n    .detail-contaner {\r\n        width 100%\r\n        display flex\r\n        flex-direction row\r\n        justify-content: flex-start\r\n        margin-top 0.5rem;\r\n        font-size 0.28rem;\r\n        color #666\r\n    }\r\n\r\n    .vertical {\r\n        display flex\r\n        flex-direction column\r\n    }\r\n\r\n    .description {\r\n        color #999\r\n        margin-right 0.3rem\r\n    }\r\n    .post-container{\r\n        height 1rem\r\n        box-box-shadow  .1rem -.1rem .1rem #e3e3e3\r\n        position fixed\r\n        width 6.9rem\r\n        background-color #ffffff\r\n        align-items center\r\n        bottom .8rem\r\n        display flex\r\n        flex-direction row\r\n        padding 0 .3rem\r\n        justify-content space-between\r\n    }\r\n    .post-fake{\r\n        display flex\r\n        flex-direction row\r\n        align-items center\r\n        height .5rem\r\n        width 4.6rem\r\n        border-radius .1rem\r\n        font-size .22rem\r\n        padding-left .2rem\r\n        border  .01rem solid #999\r\n    }\r\n    .like-container{\r\n        display flex\r\n        flex-direction row\r\n        justify-content space-between\r\n        align-items center\r\n    }\r\n    .cmplike{\r\n        margin-right  1rem\r\n        margin-top -.1rem\r\n    }\r\n    .posting-container{\r\n        bottom 1rem\r\n        position  fixed\r\n        display flex\r\n        flex-direction column\r\n        align-items center\r\n        background-color #ffffff\r\n        width 100%\r\n        z-index 999\r\n    }\r\n    .posting-container .comment-container {\r\n        width 6.9rem\r\n        padding 0 .3rem\r\n    }\r\n    .post-header{\r\n        width 100%\r\n        border-bottom .01rem solid #f5f5f5\r\n        border-top .01rem solid #f5f5f5\r\n        height 1rem\r\n        display flex\r\n        flex-direction row\r\n        align-items center\r\n        justify-content space-between\r\n    }\r\n    .post-header > span:first-child {\r\n        font-size .28rem\r\n        color #bbb\r\n        padding-left .1rem\r\n    }\r\n    .cancel {\r\n        padding-right .1rem\r\n        color #666\r\n    }\r\n    .post{\r\n        width 6.9rem\r\n        margin .3rem auto \r\n        height .9rem\r\n        background-color #f5f5f5\r\n        border-radius .15rem\r\n        padding-left .25rem\r\n    }\r\n    .shadow{\r\n        color #999\r\n    }\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/bookDetail/bookDetail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container ext-content\"},[(_vm.book)?_c('div',{staticClass:\"head\"},[_c('img',{attrs:{\"src\":_vm.book.image,\"alt\":\"\"}}),_vm._v(\" \"),_c('span',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.book.title))]),_vm._v(\" \"),_c('span',{staticClass:\"author\"},[_vm._v(_vm._s(_vm.book.author[0]))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"sub-container\"},[_c('span',{staticClass:\"headline\"},[_vm._v(\"短评\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.comments.comments == false),expression:\"comments.comments == false\"}],staticClass:\"shadow\"},[_vm._v(\"暂无短评\")]),_vm._v(\" \"),_c('div',{staticClass:\"comments-container \"},_vm._l((_vm.comments.comments),function(item,index){return _c('div',{key:index},[_c('cmp-tag',{staticClass:\"ex\",attrs:{\"text\":item.content}},[_c('span',{staticClass:\"num\",attrs:{\"slot\":\"after\"},slot:\"after\"},[_vm._v(_vm._s(\"+\" +item.nums))])])],1)}))]),_vm._v(\" \"),(_vm.book)?_c('div',{staticClass:\"sub-container\"},[_c('span',{staticClass:\"headline\"},[_vm._v(\"内容简介\")]),_vm._v(\" \"),_c('p',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.bookSummary)}})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"sub-container\"},[_c('span',{staticClass:\"headline\"},[_vm._v(\"书本信息\")]),_vm._v(\" \"),_c('div',{staticClass:\"detail-contaner\"},[_vm._m(0),_vm._v(\" \"),(_vm.book)?_c('div',{staticClass:\"vertical\"},[_c('div',{},[_vm._v(_vm._s(_vm.book.publisher))]),_vm._v(\" \"),_c('div',{},[_vm._v(_vm._s(_vm.book.pubdate))]),_vm._v(\" \"),_c('div',{},[_vm._v(_vm._s(_vm.book.pages))]),_vm._v(\" \"),_c('div',{},[_vm._v(_vm._s(_vm.book.price))]),_vm._v(\" \"),_c('div',{},[_vm._v(_vm._s(_vm.book.binding))])]):_vm._e()])]),_vm._v(\" \"),(!_vm.posting)?_c('div',{staticClass:\"post-container\"},[_c('div',{staticClass:\"post-fake\",on:{\"click\":_vm.postFake}},[_c('span',[_vm._v(\"输入短评\")])]),_vm._v(\" \"),_c('div',{staticClass:\"like-container\"},[_c('cmp-like',{staticClass:\"cmplike\",attrs:{\"count\":_vm.likeCount,\"like\":_vm.likeStatus},on:{\"status\":_vm.handleStatus}})],1)]):_vm._e(),_vm._v(\" \"),(_vm.posting)?_c('div',{staticClass:\"posting-container\"},[_c('div',{staticClass:\"post-header\"},[( !(_vm.comments.comments == false))?_c('span',[_vm._v(\"仅可点击标签+1\")]):_c('span',[_vm._v(\"暂无短评\")]),_vm._v(\" \"),_c('span',{staticClass:\"cancel\",on:{\"click\":_vm.handleCancel}},[_vm._v(\"取消\")])]),_vm._v(\" \"),_c('div',{staticClass:\"comments-container\"},_vm._l((_vm.comments.comments),function(item,index){return _c('div',{key:index},[_c('cmp-tag',{staticClass:\"ex-tag\",attrs:{\"text\":item.content},on:{\"tag\":_vm.handlePost}},[_c('span',{staticClass:\"num\",attrs:{\"slot\":\"after\"},slot:\"after\"},[_vm._v(_vm._s(\"+\" +item.nums))])])],1)})),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"}],staticClass:\"post\",attrs:{\"type\":\"text\",\"placeholder\":\"短评最多12个字\"},domProps:{\"value\":(_vm.content)},on:{\"click\":_vm.handlePostInput,\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}})]):_vm._e(),_vm._v(\" \"),(_vm.posting)?_c('cmp-mask'):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vertical\"},[_c('div',{staticClass:\"description\"},[_vm._v(\"出版社\")]),_vm._v(\" \"),_c('div',{staticClass:\"description\"},[_vm._v(\"出版年\")]),_vm._v(\" \"),_c('div',{staticClass:\"description\"},[_vm._v(\"页数\")]),_vm._v(\" \"),_c('div',{staticClass:\"description\"},[_vm._v(\"定价\")]),_vm._v(\" \"),_c('div',{staticClass:\"description\"},[_vm._v(\"装帧\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-64a700f9\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/bookDetail/bookDetail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-64a700f9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./bookDetail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bookDetail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bookDetail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-64a700f9\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./bookDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-64a700f9\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/bookDetail/bookDetail.vue\n// module id = null\n// module chunks = ","import axios from 'axios'\r\n\r\nclass LikeModel {\r\n    like(like,artID,category){\r\n        let url = like ? 'like' :'like/cancel'\r\n        let params = {\r\n            'art_id':artID,\r\n            'type':category   \r\n        }\r\n        return axios.post(url,params)\r\n    }\r\n}\r\nexport default LikeModel\n\n\n// WEBPACK FOOTER //\n// ./src/model/like.js"],"sourceRoot":""}